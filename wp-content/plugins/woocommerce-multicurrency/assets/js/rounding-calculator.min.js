(()=>{var Z=()=>{try{let U=[0.49,14.95,124.99,5900,11000,50000],{headerTitles:X,optionsPrefix:N}=window.woomcRCConfig,L={roundTo:document.querySelector(`#${N}round_to`),feePercent:document.querySelector(`#${N}fee_percent`),priceCharm:document.querySelector(`#${N}price_charm`),automaticRounding:document.querySelector(`#${N}automatic_rounding`),rate:document.createElement("input"),customPrice:document.createElement("input")};if(L.roundTo==null||L.feePercent==null||L.priceCharm==null||L.automaticRounding==null)return;let Q=0;L.rate.setAttribute("type","text"),L.rate.setAttribute("value","1.2345"),L.rate.style.width="5em",L.rate.style.marginRight="1em";let J=(D,S,q)=>{let O=parseFloat(D);return O>=S?O:q},M=(D)=>{switch(!0){case D<100:return 1;case D<5000:return 10;case D<50000:return 100;default:return 1000}},W=()=>{if(L.roundTo==null||L.feePercent==null||L.priceCharm==null||L.automaticRounding==null)return;return{roundTo:J(L.roundTo.value,0.01,0.01),priceCharm:J(L.priceCharm?.value,0,0),feePercent:J(L.feePercent?.value,0,0),rate:J(L.rate.value,0.0001,1),automaticRounding:L.automaticRounding?.checked,customPrice:J(L.customPrice.value,0,0)}},w=()=>{let D=document.createElement("table");D.style.border="1px solid #333",D.style.backgroundColor="#f0f0f0",D.style.margin="1em 0";let S=document.createElement("thead"),q=X.map((G)=>{let z=document.createElement("th");return z.style.padding="10px",z.style.textAlign="left",z.style.color="white",z.style.backgroundColor="#666",z.style.minWidth="8em",z.innerText=G,z}),O=document.createElement("tr");return q.forEach((G)=>O.appendChild(G)),S.appendChild(O),D.appendChild(S),D.appendChild(j()),D},Y=(D)=>{let S=W();if(!S)return;let q=D.querySelectorAll("tr");for(let O=0;O<q.length;O++){let G=q[O],z=U[O]??Q,H=S.automaticRounding?M(z):1,_=z*S.rate,$=_*(1+S.feePercent/100),E=Math.ceil($/(S.roundTo*H))*S.roundTo*H,k=E-S.priceCharm*H,A={originalValue:z,convertedPrice:_,convertedPriceWithFee:$,convertedPriceRounded:E,convertedPriceWithCharm:k},F=G.querySelectorAll("td");for(let K=0;K<F.length;K++){let R=F[K];if(O===q.length-1&&K===0)continue;let C=Object.values(A)[K];R.innerText=z!==0?C.toFixed(2):"-"}}},j=()=>{let D=document.createElement("tbody"),S="padding: 10px; text-align: right;";U.forEach(()=>{let z=document.createElement("tr");X.forEach(()=>{let H=document.createElement("td");H.style.cssText="padding: 10px; text-align: right;",H.style.color="#000",H.style.fontFamily="monospace",z.appendChild(H)}),D.appendChild(z)});let q=document.createElement("tr"),O=L.customPrice;O.id="custom_input",O.value=Q.toString(),O.style.width="5em";let G=document.createElement("td");G.style.cssText="padding: 10px; text-align: right;",G.appendChild(O),q.appendChild(G);for(let z=0;z<X.length-1;z++){let H=document.createElement("td");H.style.cssText="padding: 10px; text-align: right;",q.appendChild(H)}return D.appendChild(q),B(D),x(D),Y(D),D},B=(D)=>{D.querySelectorAll("tr").forEach((S,q)=>{S.style.backgroundColor=q%2===0?"white":"#ccc"})},x=(D)=>{Object.entries(L).forEach(([S,q])=>{if(q==null)return;if(q.addEventListener("change",(O)=>{let G=O.target;if(S==="customPrice")Q=J(G?.value,0,0);Y(D)}),q.type!=="checkbox")q.addEventListener("keyup",(O)=>{let G=O.target;if(S==="customPrice")Q=J(G?.value,0,0);Y(D)})})},f=w();document.querySelector("#rate_example")?.appendChild(L.rate),document.querySelector("#rounding_calculator")?.appendChild(f)}catch(U){}};if(document.readyState==="loading")document.addEventListener("DOMContentLoaded",Z);else Z();})();
