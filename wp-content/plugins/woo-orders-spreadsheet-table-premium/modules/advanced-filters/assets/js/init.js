jQuery(document).ready(function(){var a=jQuery("#be-filters");if(!a.length)return!0;var e=a.find(".advanced-filters .base");e.removeClass("base"),window.advancedGroupTemplate=e[0].outerHTML,e.remove(),a.on("click",".remove-advanced-filter",function(e){e.preventDefault();var e=jQuery(this).parents(".advanced-field"),t=e.find(".wpse-advanced-filters-field-selector").attr("name");beAddRowsFilter(t+"="),e.remove()}),jQuery("body").on("click","#be-filters .new-advanced-filter",function(e){e.preventDefault();var e=window.advancedGroupTemplate.replace(new RegExp(/\[\]/,"g"),"["+a.find(".advanced-filters .advanced-filters-list").children().length+"]"),t=a.find(".advanced-filters  .advanced-filters-list .advanced-field").last();t.length?t.after(e):a.find(".advanced-filters  .advanced-filters-list").prepend(e),setTimeout(function(){vgseInitSelect2(a.find(".advanced-filters  .advanced-filters-list .advanced-field select.select2").last())},1e3),a.find(".advanced-filters  .advanced-filters-list").children().show()}),a.find(".new-advanced-filter").last().trigger("click"),a.find(".advanced-filters-toggle").on("change",function(){jQuery(this).is(":checked")?a.find(".advanced-filters").show():a.find(".advanced-filters").hide()}),jQuery("body").on("change",".wpse-advanced-filters-operator-selector",function(){var e,t,a,s=jQuery(this).find("option:selected").data("value-field-type")||"";s?(e=(a=jQuery(this).parents(".fields-wrap").find(".wpse-advanced-filters-value-selector")).attr("name"),2===a.length&&(e=a.last().attr("name"),a.last().remove()),t=a.attr("class"),a.replaceWith('<input type="'+s+'" class="'+t+'" name="'+e+'" />'),jQuery(this).parents(".fields-wrap").find(".wpse-advanced-filters-value-selector").trigger("change")):(jQuery(this).parents(".fields-wrap").find('.wpse-advanced-filters-value-selector:first[type="number"]').attr("type","text"),a=jQuery(this).parents(".fields-wrap").find(".wpse-advanced-filters-field-selector").val(),vgseInputToFormattedColumnField(a,jQuery(this).parents(".fields-wrap"),".wpse-advanced-filters-value-selector"))}),jQuery("body").on("change",".wpse-advanced-filters-field-selector",function(){var e,t=jQuery(this).val(),a=jQuery(this);(!t||a.data("last-formatted-key")&&t!==a.data("last-formatted-key"))&&(e=a.attr("name").replace("[key]","[value]"),a.parents(".fields-wrap").find(".wpse-advanced-filters-value-selector:gt(0)").remove(),a.parents(".fields-wrap").find(".wpse-advanced-filters-value-selector").replaceWith('<input name="'+e+'" class="wpse-advanced-filters-value-selector" type="text" />'),a.data("last-formatted-key","")),t&&(a.parent().find("input.field-source").val(a.find("option:selected").data("source")),a.parent().find(".search-value-wrap input").val(""),vgseInputToFormattedColumnField(t,a.parents(".fields-wrap"),".wpse-advanced-filters-value-selector"),a.data("last-formatted-key",t),t)&&("date"===(void 0!==vgse_editor_settings.final_spreadsheet_columns_settings[t]?vgse_editor_settings.final_spreadsheet_columns_settings[t].value_type:"")?a.parents(".fields-wrap").find('.wpse-advanced-filters-operator-selector option[data-value-type="date"]').show():a.parents(".fields-wrap").find('.wpse-advanced-filters-operator-selector option[data-value-type="date"]').hide())})}),jQuery(document).ready(function(){jQuery("body").on("click","[data-start-saved-search]",function(e){e.preventDefault();e=jQuery(this).data("start-saved-search");vgseRemoveAllFilters(),jQuery("body").data("be-filters",""),beAddRowsFilter(e),vgseFilters.fillSearchForm(e),vgseReloadSpreadsheet()})}),jQuery(document).ready(function(){var a=jQuery("#be-filters");if(!a.length)return!0;var s=jQuery(".vg-toolbar .button-container.run_filters-container .toolbar-submenu");function r(e){return s.find("ul").filter(function(){return jQuery(this).data("key")===e})}function n(){1<s.find("input").length?s.find(".wpse-start-quick-search").show():s.find(".wpse-start-quick-search").hide(),s.find(".wpse-start-quick-search").appendTo(s)}function i(e,t){var a;r(t).length||(e.find(".select2").each(function(){jQuery(this).data("select2")&&jQuery(this).select2("destroy")}),a=e.clone(!0),s.append('<ul data-key="'+t+'"></ul>'),a.find(".wpse-advanced-filters-field-selector").length&&(a.prepend("<span>"+wp.i18n.__("Search by specific field","vg_sheet_editor")+"</span>"),a.find(".wpse-advanced-filters-field-selector").val("_sku")),s.find("ul").last().append(a),vgseInitSelect2(e.find(".select2")),vgseInitSelect2(s.find("ul").last().find(".select2")),n())}a.find("li").each(function(){var e,t=jQuery(this),a=t.find("input,select,textarea").first();a.length&&(a=a.attr("name"))&&"keyword"!==a&&(e=-1<vgse_editor_settings.favorite_search_fields.indexOf(a)?"fa-star":"fa-star-o",t.append('<button class="wpse-favorite-search-field" type="button" data-key="'+a+'"><i class="fa '+e+'"></i></button>'),"fa-star"==e)&&i(t,a)}),jQuery("body").on("click",".wpse-favorite-search-field",function(e){e.preventDefault();var e=jQuery(this),t=(e.find(".fa-star").length?e.find("i").addClass("fa-star-o").removeClass("fa-star"):e.find("i").addClass("fa-star").removeClass("fa-star-o"),e.find(".fa-star").length?i(e.parents("li"),e.data("key")):(e.parents("li"),r(e.data("key")).remove(),n()),[]);a.find(".wpse-favorite-search-field .fa-star").each(function(){t.push(jQuery(this).parent().data("key"))}),jQuery.post(vgse_global_data.ajax_url,{action:"vgse_mark_search_fields_as_favorite",post_type:vgse_editor_settings.post_type,fields:t,nonce:vgse_editor_settings.nonce})})});